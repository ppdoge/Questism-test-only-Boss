<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Questism - H√†nh Tr√¨nh Th·ªëng Nh·∫•t Gangbuk</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="game-header">
            <h1 class="game-title">‚öîÔ∏è QUESTISM ‚öîÔ∏è</h1>
            <p class="game-subtitle">H√†nh Tr√¨nh Th·ªëng Nh·∫•t Gangbuk</p>
            <div class="header-actions" style="position:absolute; right:20px; top:18px;">
                <button class="btn btn-secondary small" onclick="saveGame()">L∆∞u</button>
                <button class="btn btn-secondary small" onclick="loadGame()">T·∫£i</button>
                <button class="btn btn-secondary small" onclick="exportSave()">Xu·∫•t</button>
                <button class="btn btn-secondary small" onclick="document.getElementById('importFile').click()">Nh·∫≠p</button>
                <input type="file" id="importFile" style="display:none" accept="application/json" />
            </div>
        </div>

        <!-- Progress Section -->
        <div class="progress-section">
            <div class="progress-info">
                <span>üéØ Arc <span id="currentArc">1</span>/3</span>
                <span>üìã Nhi·ªám v·ª•: <span id="questProgress">0</span>/500</span>
                <span>üí∞ ƒêi·ªÉm: <span id="totalPoints">0</span></span>
            </div>
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
        </div>

        <!-- Quest Tracker -->
        <div class="quest-tracker">
            <div class="quest-tracker-title">
                üìå QUEST TRACKER - Nhi·ªám v·ª• kh·∫£ d·ª•ng
            </div>
            <div id="questTrackerList"></div>
        </div>

        <!-- Main Grid -->
        <div class="main-grid">
            <!-- Character Panel -->
            <div class="panel character-panel">
                <h2 class="panel-title">üë§ Nh√¢n V·∫≠t</h2>
                <div class="character-info">
                    <div class="character-name" id="characterName">MC (B·∫°n)</div>
                    <div class="breakthrough-badge" id="breakthroughLevel">None</div>
                </div>
                
                <div class="hp-bar">
                    <div class="hp-fill" id="hpBar">
                        <span id="hpText">100/100</span>
                    </div>
                </div>

                <div class="stats-grid">
                    <div class="stat-row">
                        <span class="stat-name">üí™ S·ª©c m·∫°nh</span>
                        <span class="stat-value" id="statStr">F</span>
                    </div>
                    <div class="stat-row">
                        <span class="stat-name">‚ö° T·ªëc ƒë·ªô</span>
                        <span class="stat-value" id="statSpd">F</span>
                    </div>
                    <div class="stat-row">
                        <span class="stat-name">üõ°Ô∏è Ch·ªãu ƒë√≤n</span>
                        <span class="stat-value" id="statDur">F</span>
                    </div>
                    <div class="stat-row">
                        <span class="stat-name">üîÆ Ti·ªÅm nƒÉng</span>
                        <span class="stat-value" id="statPot">F</span>
                    </div>
                    <div class="stat-row">
                        <span class="stat-name">üß† Tr√≠ tu·ªá</span>
                        <span class="stat-value" id="statInt">F</span>
                    </div>
                </div>

                <div class="special-status">
                    <div class="status-item danger">
                        ‚ö†Ô∏è ƒê·ªôt ph√° √©p bu·ªôc: <span id="forcedBreak">Kh√¥ng</span>
                    </div>
                    <div class="status-item success">
                        ‚ú® Exclusive Skill: <span id="exclusiveSkill">Ch∆∞a c√≥</span>
                    </div>
                </div>

                <div class="crew-section">
                    <h3 class="section-title">üë• Crew (<span id="crewCount">0</span>)</h3>
                    <div id="crewList" class="crew-grid"></div>
                </div>
            </div>

            <!-- Quest List -->
            <div class="panel quest-list-panel">
                <h2 class="panel-title">üìú Danh S√°ch Nhi·ªám V·ª•</h2>
                <div class="quest-filter">
                    <button class="filter-btn active" onclick="filterQuests('all')">T·∫•t c·∫£</button>
                    <button class="filter-btn" onclick="filterQuests('main')">Ch√≠nh</button>
                    <button class="filter-btn" onclick="filterQuests('side')">Ph·ª•</button>
                </div>
                <div id="questList" class="quest-scroll"></div>
            </div>

            <!-- Inventory -->
            <div class="panel inventory-panel" id="inventoryPanel">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                    <h2 class="panel-title">üé¥ Kho ƒê·ªì (<span id="cardCount">0</span>)</h2>
                    <button class="btn btn-info" onclick="toggleShop()" style="padding: 5px 10px; font-size: 0.9em;">üè™ C·ª≠a H√†ng</button>
                </div>
                <div class="card-filter">
                    <select id="cardTypeFilter" onchange="filterInventory()">
                        <option value="all">T·∫•t c·∫£</option>
                        <option value="stat">Th·∫ª Ch·ªâ s·ªë</option>
                        <option value="skill">Th·∫ª K·ªπ nƒÉng</option>
                        <option value="support">Th·∫ª H·ªó tr·ª£</option>
                        <option value="cultivation">Th·∫ª B·ªìi d∆∞·ª°ng</option>
                        <option value="special">Th·∫ª ƒê·∫∑c bi·ªát</option>
                    </select>
                </div>
                <div id="inventoryList" class="inventory-scroll"></div>
            </div>

            <!-- Shop Panel (Hidden by default) -->
            <div class="panel inventory-panel" id="shopPanel" style="display: none;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                    <h2 class="panel-title">üè™ C·ª≠a H√†ng</h2>
                    <button class="btn btn-info" onclick="toggleShop()" style="padding: 5px 10px; font-size: 0.9em;">üé¥ Kho ƒê·ªì</button>
                </div>
                <div class="card-filter">
                    <select id="shopTypeFilter" onchange="filterShop()">
                        <option value="all">T·∫•t c·∫£</option>
                        <option value="stat">Th·∫ª Ch·ªâ s·ªë</option>
                        <option value="skill">Th·∫ª K·ªπ nƒÉng</option>
                        <option value="support">Th·∫ª H·ªó tr·ª£</option>
                        <option value="cultivation">Th·∫ª B·ªìi d∆∞·ª°ng</option>
                    </select>
                </div>
                <div id="shopList" class="inventory-scroll"></div>
            </div>
        </div>
    </div>

    <!-- Battle Screen -->
    <div class="battle-screen" id="battleScreen">
        <div class="battle-container">
            <div class="battle-title">Battle Title</div>

            <div class="battle-body">
            <table class="battle-table">
                <tbody>
                    <tr>
                        <td class="battle-header-cell">
                            <div class="header-left">
                                <div>MC</div>
                                <div>(Stat)</div>
                                <div>(HP Bar)</div>
                            </div>
                        </td>
                        <td class="battle-header-cell">
                            <div class="header-right">
                                <div>Boss name (If Boss Quest)</div>
                                <div>(Stat)</div>
                                <div>(HP Bar)</div>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td class="left-column">
                            <div class="crew-member">
                                <div>Crew member 1</div>
                                <div>(Stat)</div>
                                <div>(HP Bar)</div>
                            </div>
                            <div class="crew-member">
                                <div>Crew member 2</div>
                                <div>(Stat)</div>
                                <div>(HP Bar)</div>
                            </div>
                            <div class="crew-member">
                                <div>Crew member 3</div>
                                <div>(Stat)</div>
                                <div>(HP Bar)</div>
                            </div>
                        </td>
                        <td class="right-column">
                            <div class="minion">
                                <div>Minion 1 HP</div>
                                <div>(Stat)</div>
                                <div>(HP Bar)</div>
                            </div>
                            <div class="minion">
                                <div>Minion 2 HP</div>
                                <div>(Stat)</div>
                                <div>(HP Bar)</div>
                            </div>
                            <div class="minion">
                                <div>Minion 3 HP</div>
                                <div>(Stat)</div>
                                <div>(HP Bar)</div>
                            </div>
                            <div class="minion">
                                <div>Minion 4 HP</div>
                                <div>(Stat)</div>
                                <div>(HP Bar)</div>
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>

            <div class="battle-section">
                <div class="section-title">Battle Log</div>
                <div class="section-content" id="battleLog"></div>
            </div>

            </div> <!-- .battle-body -->

            <div class="battle-section battle-actions" id="battleActionsWrapper">
                <div class="section-title">Battle Actions</div>
                <div class="section-content" id="battleActions">
                    <button class="btn btn-danger" onclick="closeBattle()">ƒê√≥ng</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Breakthrough Overlay -->
    <div class="breakthrough-overlay" id="breakthroughOverlay">
        <div class="breakthrough-content">
            <div class="breakthrough-text">üåü ƒê·ªòT PH√Å GI·ªöI H·∫†N! üåü</div>
            <div class="breakthrough-subtext" id="breakthroughType"></div>
        </div>
    </div>

    <!-- Modal -->
    <div class="modal" id="modal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeModal()">&times;</span>
            <h2 class="modal-title" id="modalTitle"></h2>
            <div class="modal-body" id="modalBody"></div>
        </div>
    </div>

    <!-- Victory Modal Overlay -->
    <div class="victory-overlay" id="victoryOverlay">
        <div class="victory-modal">
            <div class="victory-header">
                <div class="victory-title"> CHI·∫æN TH·∫ÆNG </div>
            </div>
            <div class="victory-content">
                <div class="victory-message" id="victoryMessage">
                    B·∫°n ƒë√£ ho√†n th√†nh nhi·ªám v·ª•!
                </div>
                <div class="victory-reward">
                    <div class="reward-item">üí∞ Nh·∫≠n 100 ƒëi·ªÉm th∆∞·ªüng!</div>
                </div>
            </div>
            <div class="victory-actions">
                <button class="btn btn-success btn-large" onclick="endBattleAndContinue(true)">
                    ‚úÖ Ti·∫øp t·ª•c
                </button>
            </div>
        </div>
    </div>

    <script src="game.js"></script>
</body>
</html>